/*
 * generated by Fujaba - CodeGen2
 */
package de.uni_kassel.fujaba.codegen.rules.writers;
import java.util.Iterator;

import de.uni_kassel.fujaba.codegen.TemplateCodeWriter;
import de.uni_kassel.fujaba.codegen.engine.CodeWritingEngine;
import de.uni_kassel.fujaba.codegen.rules.Token;
import de.upb.tools.sdm.JavaSDM; // requires Fujaba5/libs/RuntimeTools.jar in classpath
import de.upb.tools.sdm.JavaSDMException;


public class BlockCodeWriter extends StoryPatternElementCodeWriter
{


   public String getAccessStyle (Token operation )
   {
      boolean fujaba__Success = false;
      String style = null;
      Iterator fujaba__IterEngineToWriter = null;
      Object _TmpObject = null;
      TemplateCodeWriter writer = null;
      Iterator fujaba__IterOperationToOp = null;
      Token op = null;
      CodeWritingEngine engine = null;

      // story pattern storypatternwiththis
      try 
      {
         fujaba__Success = false; 

         // check object operation is really bound
         JavaSDM.ensure ( operation != null );
         // search to-one link generators from this to engine
         engine = this.getEngine ();

         // check object engine is really bound
         JavaSDM.ensure ( engine != null );

         // iterate to-many link children from operation to op
         fujaba__Success = false;
         fujaba__IterOperationToOp = operation.iteratorOfChildren ();

         while ( fujaba__IterOperationToOp.hasNext () )
         {
            try
            {
               op = (Token) fujaba__IterOperationToOp.next ();

               // check object op is really bound
               JavaSDM.ensure ( op != null );
               // check isomorphic binding between objects operation and op
               JavaSDM.ensure ( !operation.equals (op) );

               // iterate to-many link generators from engine to writer
               fujaba__Success = false;
               fujaba__IterEngineToWriter = engine.iteratorOfGenerators ();

               while ( fujaba__IterEngineToWriter.hasNext () )
               {
                  try
                  {
                     _TmpObject =  fujaba__IterEngineToWriter.next ();

                     // ensure correct type and really bound of object writer
                     JavaSDM.ensure ( _TmpObject instanceof TemplateCodeWriter );
                     writer = (TemplateCodeWriter) _TmpObject;

                     // check isomorphic binding between objects writer and this
                     JavaSDM.ensure ( !writer.equals (this) );

                     // constraint writer.isResponsibleFor(op)
                     JavaSDM.ensure ( writer.isResponsibleFor(op) );
                     // story pattern successor
                     try 
                     {
                        fujaba__Success = false; 

                        // collabStat call
                        style = writer.getAccessStyle(op);
                        fujaba__Success = true;
                     }
                     catch ( JavaSDMException fujaba__InternalException )
                     {
                        fujaba__Success = false;
                     }

                     if ( style != null )
                     {
                        return style;

                     }

                     fujaba__Success = true;
                  }
                  catch ( JavaSDMException fujaba__InternalException )
                  {
                     fujaba__Success = false;
                  }
               }
               JavaSDM.ensure (fujaba__Success);

               fujaba__Success = true;
            }
            catch ( JavaSDMException fujaba__InternalException )
            {
               fujaba__Success = false;
            }
         }
         JavaSDM.ensure (fujaba__Success);

         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      return super.getAccessStyle(operation);
   }

}


