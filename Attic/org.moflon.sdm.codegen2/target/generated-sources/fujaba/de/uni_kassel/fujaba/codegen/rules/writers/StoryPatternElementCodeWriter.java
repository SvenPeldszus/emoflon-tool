/*
 * generated by Fujaba - CodeGen2
 */
package de.uni_kassel.fujaba.codegen.rules.writers;
import de.uni_kassel.fujaba.codegen.TemplateCodeWriter;
import de.uni_kassel.fujaba.codegen.rules.ExecuteStoryPatternOperation;
import de.uni_kassel.fujaba.codegen.rules.Token;
import de.uni_paderborn.fujaba.metamodel.common.FCodeStyle;
import de.uni_paderborn.fujaba.uml.behavior.UMLStoryPattern;
import de.upb.tools.sdm.JavaSDM; // requires Fujaba5/libs/RuntimeTools.jar in classpath
import de.upb.tools.sdm.JavaSDMException;


public class StoryPatternElementCodeWriter extends TemplateCodeWriter
{


   public String getAccessStyle (Token operation )
   {
      boolean fujaba__Success = false;
      Token token = null;
      Object _TmpObject = null;
      ExecuteStoryPatternOperation storyToken = null;
      Token parent = null;
      FCodeStyle style = null;
      UMLStoryPattern story = null;

      // story pattern 
      try 
      {
         fujaba__Success = false; 

         token = operation;

         // check object token is really bound
         JavaSDM.ensure ( token != null );
         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      while( true )
      {
         // story pattern 
         try 
         {
            fujaba__Success = false; 

            _TmpObject = token;

            // ensure correct type and really bound of object storyToken
            JavaSDM.ensure ( _TmpObject instanceof ExecuteStoryPatternOperation );
            storyToken = (ExecuteStoryPatternOperation) _TmpObject;

            fujaba__Success = true;
         }
         catch ( JavaSDMException fujaba__InternalException )
         {
            fujaba__Success = false;
         }



      	// loop termination check 
      	if ( fujaba__Success )
      	{
      		break;
      	}
	
         // story pattern 
         try 
         {
            fujaba__Success = false; 

            // check object token is really bound
            JavaSDM.ensure ( token != null );
            // search to-one link children from token to parent
            parent = token.getParent ();

            // check object parent is really bound
            JavaSDM.ensure ( parent != null );

            // check isomorphic binding between objects token and parent
            JavaSDM.ensure ( !token.equals (parent) );


            // collabStat call
            token = parent;
            fujaba__Success = true;
         }
         catch ( JavaSDMException fujaba__InternalException )
         {
            fujaba__Success = false;
         }

         if ( !( fujaba__Success ) )
         {
            return super.getAccessStyle(operation);

         }

      }
      // story pattern Successor of successor
      try 
      {
         fujaba__Success = false; 

         // check object storyToken is really bound
         JavaSDM.ensure ( storyToken != null );
         // search to-one link storyPattern from storyToken to story
         story = storyToken.getStoryPattern ();

         // check object story is really bound
         JavaSDM.ensure ( story != null );

         // search to-one link inheritedCodeStyle from story to style
         style = story.getInheritedCodeStyle ();

         // check object style is really bound
         JavaSDM.ensure ( style != null );



         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      if ( fujaba__Success )
      {
         return style.getName();

      }
      return super.getAccessStyle(operation);
   }

}


