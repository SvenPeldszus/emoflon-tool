/*
 * generated by Fujaba - CodeGen2
 */
package de.uni_kassel.fujaba.codegen.rules.engine;
import de.uni_kassel.fujaba.codegen.rules.Token;
import de.uni_paderborn.fujaba.metamodel.structure.FRole;
import de.uni_paderborn.fujaba.uml.behavior.UMLLink;
import de.uni_paderborn.fujaba.uml.behavior.UMLObject;
import de.upb.tools.sdm.JavaSDM;
import de.upb.tools.sdm.JavaSDMException; // requires Fujaba5/libs/RuntimeTools.jar in classpath


public abstract class KeyableToNCostStrategy extends ToNCostStrategy
{


   protected abstract boolean checkQualified (UMLLink link , UMLObject target );

   protected double getDefaultPayload (UMLLink link , UMLObject target )
   {

      return super.getPayload (link, target);
   }

   protected double getPayload (UMLLink link , UMLObject target )
   {
      boolean fujaba__Success = false;
      double result = 0.0;
      int max = 0;

      // story pattern 
      try 
      {
         fujaba__Success = false; 

         // collabStat call
         result = super.getPayload( link, target );
         // collabStat call
         max = getUpperBound (link, target);
         // collabStat call
         if ( max > 0 )
         {
         result = Math.min (result, max);
         }
         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      return result;
   }

   protected int getUpperBound (UMLLink link , UMLObject target )
   {

      return 0;
   }

   protected boolean isResponsibleImpl (Token operation , UMLLink link , UMLObject target , FRole sourceRole , FRole targetRole )
   {
      boolean fujaba__Success = false;
      boolean result = false;

      // story pattern 
      try 
      {
         fujaba__Success = false; 

         // constraint checkQualified (link, target)
         JavaSDM.ensure ( checkQualified (link, target) );
         // collabStat call
         result = super.isResponsibleImpl( operation, link, target, sourceRole, targetRole );
         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      return result;
   }

}


