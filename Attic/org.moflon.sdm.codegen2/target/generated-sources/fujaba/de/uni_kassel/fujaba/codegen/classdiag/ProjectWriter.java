/*
 * generated by Fujaba - CodeGen2
 */
package de.uni_kassel.fujaba.codegen.classdiag;
import java.util.Iterator;

import de.uni_kassel.fujaba.codegen.engine.CodeToFileWriter;
import de.uni_kassel.fujaba.codegen.engine.CodeWritingEngine;
import de.uni_kassel.fujaba.codegen.rules.Token;
import de.upb.tools.fca.FHashSet; // requires Fujaba5/libs/RuntimeTools.jar in classpath
import de.upb.tools.sdm.JavaSDM; // requires Fujaba5/libs/RuntimeTools.jar in classpath
import de.upb.tools.sdm.JavaSDMException;


public class ProjectWriter extends ASGElementCodeWriter
{


   public String generateCode (Token operation )
   {
      boolean fujaba__Success = false;
      Iterator fujaba__IterEngineToFujaba__TmpObjectFileWriters = null;
      FHashSet fileWriters = null;
      Object _TmpObject = null;
      CodeToFileWriter fujaba__TmpObjectFileWriters = null;
      CodeWritingEngine engine = null;
      Iterator fujaba__IterFileWriters = null;
      String result = null;

      // story pattern 
      try 
      {
         fujaba__Success = false; 

         // constraint isResponsibleFor (operation)
         JavaSDM.ensure ( isResponsibleFor (operation) );
         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      if ( !( fujaba__Success ) )
      {
         return null;

      }
      // story pattern 
      try 
      {
         fujaba__Success = false; 

         // search to-one link generators from this to engine
         engine = this.getEngine ();

         // check object engine is really bound
         JavaSDM.ensure ( engine != null );

         // iterate to-many link generators from engine to fujaba__TmpObjectFileWriters
         fileWriters = new FHashSet ();
         fujaba__IterEngineToFujaba__TmpObjectFileWriters = engine.iteratorOfGenerators ();

         while ( fujaba__IterEngineToFujaba__TmpObjectFileWriters.hasNext () )
         {
            try
            {
               _TmpObject =  fujaba__IterEngineToFujaba__TmpObjectFileWriters.next ();

               // ensure correct type and really bound of object fujaba__TmpObjectFileWriters
               JavaSDM.ensure ( _TmpObject instanceof CodeToFileWriter );
               fujaba__TmpObjectFileWriters = (CodeToFileWriter) _TmpObject;


               fileWriters.add (fujaba__TmpObjectFileWriters);
            }
            catch ( JavaSDMException fujaba__InternalException )
            {
               fujaba__Success = false;
            }
         }

         // iterate set
         fujaba__IterFileWriters = fileWriters.iterator ();
         while ( fujaba__IterFileWriters.hasNext () )
         {
            fujaba__TmpObjectFileWriters = (CodeToFileWriter) fujaba__IterFileWriters.next ();
            // assign attribute fujaba__TmpObjectFileWriters
            fujaba__TmpObjectFileWriters.setCreateFiles (true);

         } // while
         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      // story pattern 
      try 
      {
         fujaba__Success = false; 

         // collabStat call
         result = super.generateCode( operation );
         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      // story pattern 
      try 
      {
         fujaba__Success = false; 

         // iterate set
         fujaba__IterFileWriters = fileWriters.iterator ();
         while ( fujaba__IterFileWriters.hasNext () )
         {
            fujaba__TmpObjectFileWriters = (CodeToFileWriter) fujaba__IterFileWriters.next ();
            // assign attribute fujaba__TmpObjectFileWriters
            fujaba__TmpObjectFileWriters.setCreateFiles (false);

         } // while
         fujaba__Success = true;
      }
      catch ( JavaSDMException fujaba__InternalException )
      {
         fujaba__Success = false;
      }

      return result;
   }

}


