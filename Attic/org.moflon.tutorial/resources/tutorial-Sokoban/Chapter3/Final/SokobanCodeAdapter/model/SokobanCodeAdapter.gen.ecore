<?xml version="1.0" encoding="ASCII"?>
<ecore:EPackage xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" name="SokobanCodeAdapter" nsURI="http://www.moflon.org.SokobanCodeAdapter" nsPrefix="SokobanCodeAdapter">
  <eClassifiers xsi:type="ecore:EClass" name="NodeToBoard">
    <eStructuralFeatures xsi:type="ecore:EReference" name="source">
      <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EReference" name="target">
      <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="NodeToFloor">
    <eStructuralFeatures xsi:type="ecore:EReference" name="source">
      <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EReference" name="target">
      <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eSubpackages name="Rules" nsURI="http://www.moflon.org.SokobanCodeAdapter.Rules" nsPrefix="Rules">
    <eClassifiers xsi:type="ecore:EClass" name="AdminNodeToFigureRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floorNode&amp;quot;, floorNode);&amp;#xA;match.registerObject(&amp;quot;figureNode&amp;quot;, figureNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__admin&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;figureNode&amp;quot;,figureNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;AdminNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__admin&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floor&amp;quot;, floor);&amp;#xA;match.registerObject(&amp;quot;admin&amp;quot;, admin);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="admin">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Admin"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__admin&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;admin&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;admin&amp;quot;,admin);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;AdminNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;admin&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_1">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;@&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;admin&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD/admin&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Admin_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;admin&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD/admin&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AdminNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AdminNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;admin&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Admin&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="admin">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Admin"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="AllOtherNodeToFloorRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode__parentNode__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;parentNode&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;boardNode&amp;quot;, boardNode);&amp;#xA;match.registerObject(&amp;quot;rowNode&amp;quot;, rowNode);&amp;#xA;match.registerObject(&amp;quot;columnNode&amp;quot;, columnNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextEdges&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="rowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="columnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12 //@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.8 //@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.13 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode__parentNode__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;parentNode&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10 //@ownedActivityNode.2/@storyPattern/@linkVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__left__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.13 //@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;left&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__top__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.16 //@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;top&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;columnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToBoard&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;leftNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;topNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;floor&amp;quot;,&amp;quot;row&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;floor&amp;quot;,&amp;quot;col&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.11&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740014746F704E65696768626F722E676574526F772829&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED00057400156C6566744E65696768626F722E676574436F6C2829&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740012726F774E6F64652E676574496E6465782829&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740015636F6C756D6E4E6F64652E676574496E6465782829&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED00057400156C6566744E65696768626F722E676574526F772829&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740014746F704E65696768626F722E676574436F6C2829&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.2 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.4 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.3 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.5&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.2 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.3 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.4 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.5&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.2 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.3&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.4 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.5&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal0 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal0&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal0.setValue(1);&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal1 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal1&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal1.setValue(1);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_topNeighbor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;topNeighbor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_topNeighbor_row.setValue(topNeighbor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_leftNeighbor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;leftNeighbor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_leftNeighbor_col.setValue(leftNeighbor.getCol());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_rowNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;rowNode.index&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_rowNode_index.setValue(rowNode.getIndex());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_columnNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;columnNode.index&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_columnNode_index.setValue(columnNode.getIndex());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_leftNeighbor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;leftNeighbor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_leftNeighbor_row.setValue(leftNeighbor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_topNeighbor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;topNeighbor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_topNeighbor_col.setValue(topNeighbor.getCol());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.row&amp;quot;, csp);&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.col&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Sub sub = new Sub();Eq&amp;lt;Number> eq = new Eq&amp;lt;Number>();Eq&amp;lt;Number> eq_0 = new Eq&amp;lt;Number>();Sub sub_0 = new Sub();Eq&amp;lt;Number> eq_1 = new Eq&amp;lt;Number>();Eq&amp;lt;Number> eq_2 = new Eq&amp;lt;Number>();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(sub);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq_0);&amp;#xD;&amp;#xA;csp.getConstraints().add(sub_0);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq_1);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq_2);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;sub.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub.solve(var_floor_row,literal0,var_topNeighbor_row);&amp;#xD;&amp;#xA;eq.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq.solve(var_floor_row,var_rowNode_index);&amp;#xD;&amp;#xA;eq_0.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq_0.solve(var_floor_row,var_leftNeighbor_row);&amp;#xD;&amp;#xA;sub_0.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub_0.solve(var_floor_col,literal1,var_leftNeighbor_col);&amp;#xD;&amp;#xA;eq_1.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq_1.solve(var_floor_col,var_columnNode_index);&amp;#xD;&amp;#xA;eq_2.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq_2.solve(var_floor_col,var_topNeighbor_col);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardNode&amp;quot;,boardNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;rowNode&amp;quot;,rowNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;columnNode&amp;quot;,columnNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToBoard&amp;quot;,nodeToBoard);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;board&amp;quot;,board);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;leftNeighbor&amp;quot;,leftNeighbor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;topNeighbor&amp;quot;,topNeighbor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;AllOtherNodeToFloorRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4 //@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1 //@ownedActivityNode.5/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.3 //@ownedActivityNode.5/@storyPattern/@csp/@variables.4 //@ownedActivityNode.5/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.3 //@ownedActivityNode.5/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.3 //@ownedActivityNode.5/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;columnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.4 //@ownedActivityNode.0/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3 //@ownedActivityNode.0/@storyPattern/@linkVariable.5 //@ownedActivityNode.0/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__left__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.5 //@ownedActivityNode.0/@storyPattern/@linkVariable.6&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;left&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__top__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.8 //@ownedActivityNode.0/@storyPattern/@linkVariable.9&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;top&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.9&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal0 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal0&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal0.setValue(1);&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal1 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal1&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal1.setValue(1);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_row.setValue(floor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_topNeighbor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;topNeighbor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_topNeighbor_row.setValue(topNeighbor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_col.setValue(floor.getCol());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_leftNeighbor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;leftNeighbor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_leftNeighbor_col.setValue(leftNeighbor.getCol());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_leftNeighbor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;leftNeighbor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_leftNeighbor_row.setValue(leftNeighbor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_topNeighbor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;topNeighbor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_topNeighbor_col.setValue(topNeighbor.getCol());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Sub sub = new Sub();Sub sub_0 = new Sub();Eq&amp;lt;Number> eq = new Eq&amp;lt;Number>();Eq&amp;lt;Number> eq_0 = new Eq&amp;lt;Number>();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(sub);&amp;#xD;&amp;#xA;csp.getConstraints().add(sub_0);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq_0);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;sub.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub.solve(var_floor_row,literal0,var_topNeighbor_row);&amp;#xD;&amp;#xA;sub_0.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub_0.solve(var_floor_col,literal1,var_leftNeighbor_col);&amp;#xD;&amp;#xA;eq.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq.solve(var_floor_row,var_leftNeighbor_row);&amp;#xD;&amp;#xA;eq_0.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq_0.solve(var_floor_col,var_topNeighbor_col);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;board&amp;quot;, board);&amp;#xA;match.registerObject(&amp;quot;leftNeighbor&amp;quot;, leftNeighbor);&amp;#xA;match.registerObject(&amp;quot;topNeighbor&amp;quot;, topNeighbor);&amp;#xA;match.registerObject(&amp;quot;floor&amp;quot;, floor);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.4 //@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.5 //@ownedActivityNode.5/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.6 //@ownedActivityNode.5/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextEdges&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextEdges&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
        <eParameters name="leftNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="topNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12 //@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.8 //@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.13 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode__parentNode__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;parentNode&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__left__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;left&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__top__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;top&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;columnNode&amp;quot;,&amp;quot;index&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToBoard&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;leftNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;topNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.11&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED000574000E666C6F6F722E676574526F772829&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED000574000E666C6F6F722E676574436F6C2829&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740012726F774E6F64652E676574496E6465782829&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.2 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.3 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.4 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.5&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.2 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.3 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.4 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.5&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.2 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.3&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.4 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.5&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_row.setValue(floor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_rowNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;rowNode.index&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_rowNode_index.setValue(rowNode.getIndex());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_col.setValue(floor.getCol());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_columnNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;columnNode.index&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Eq&amp;lt;Number> eq = new Eq&amp;lt;Number>();Eq&amp;lt;Number> eq_0 = new Eq&amp;lt;Number>();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(eq);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq_0);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;eq.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq.solve(var_floor_row,var_rowNode_index);&amp;#xD;&amp;#xA;eq_0.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq_0.solve(var_floor_col,var_columnNode_index);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardNode&amp;quot;,boardNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;rowNode&amp;quot;,rowNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToBoard&amp;quot;,nodeToBoard);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;board&amp;quot;,board);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;leftNeighbor&amp;quot;,leftNeighbor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;topNeighbor&amp;quot;,topNeighbor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;AllOtherNodeToFloorRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.4 //@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4 //@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.6 //@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.6&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.6&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1 //@ownedActivityNode.5/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.3 //@ownedActivityNode.5/@storyPattern/@csp/@variables.4 //@ownedActivityNode.5/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.3 //@ownedActivityNode.5/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.3 //@ownedActivityNode.5/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;leftNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;topNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_2">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_3">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="rowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_4">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;UNEQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;parentNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="columnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Board_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/leftNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/topNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_1">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/leftNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/topNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="leftNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_2">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/leftNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/topNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="topNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_3">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/leftNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/topNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.4 //@ownedActivityNode.3/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.3 //@ownedActivityNode.3/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/AllOtherNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;AllOtherNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, rowNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row, leftNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, topNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.4 //@ownedActivityNode.6/@storyPattern/@csp/@variables.5&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.6&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.7&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.8&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.3 //@ownedActivityNode.6/@storyPattern/@csp/@variables.9&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="BoardNodeToBoardRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3 //@ownedActivityNode.0/@storyPattern/@linkVariable.4 //@ownedActivityNode.0/@storyPattern/@linkVariable.5 //@ownedActivityNode.0/@storyPattern/@linkVariable.6 //@ownedActivityNode.0/@storyPattern/@linkVariable.7 //@ownedActivityNode.0/@storyPattern/@linkVariable.8 //@ownedActivityNode.0/@storyPattern/@linkVariable.9 //@ownedActivityNode.0/@storyPattern/@linkVariable.10 //@ownedActivityNode.0/@storyPattern/@linkVariable.13 //@ownedActivityNode.0/@storyPattern/@linkVariable.16 //@ownedActivityNode.0/@storyPattern/@linkVariable.19 //@ownedActivityNode.0/@storyPattern/@linkVariable.22 //@ownedActivityNode.0/@storyPattern/@linkVariable.25 //@ownedActivityNode.0/@storyPattern/@linkVariable.28 //@ownedActivityNode.0/@storyPattern/@linkVariable.31 //@ownedActivityNode.0/@storyPattern/@linkVariable.34&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.11&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.12 //@ownedActivityNode.0/@storyPattern/@linkVariable.14 //@ownedActivityNode.0/@storyPattern/@linkVariable.17&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.18 //@ownedActivityNode.0/@storyPattern/@linkVariable.20 //@ownedActivityNode.0/@storyPattern/@linkVariable.23&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.3 //@ownedActivityNode.0/@storyPattern/@linkVariable.21 //@ownedActivityNode.0/@storyPattern/@linkVariable.26&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.4 //@ownedActivityNode.0/@storyPattern/@linkVariable.24 //@ownedActivityNode.0/@storyPattern/@linkVariable.29&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.5 //@ownedActivityNode.0/@storyPattern/@linkVariable.27&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.6 //@ownedActivityNode.0/@storyPattern/@linkVariable.30&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.7 //@ownedActivityNode.0/@storyPattern/@linkVariable.15 //@ownedActivityNode.0/@storyPattern/@linkVariable.32&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.8 //@ownedActivityNode.0/@storyPattern/@linkVariable.33 //@ownedActivityNode.0/@storyPattern/@linkVariable.35&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.9 //@ownedActivityNode.0/@storyPattern/@linkVariable.36&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file__rootNode__boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.10&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.11 //@ownedActivityNode.0/@storyPattern/@linkVariable.12&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;rootNode&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode__children__boardNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.13&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.14 //@ownedActivityNode.0/@storyPattern/@linkVariable.15&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode__children__dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.16&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.17 //@ownedActivityNode.0/@storyPattern/@linkVariable.18&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode__children__rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.19&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.20 //@ownedActivityNode.0/@storyPattern/@linkVariable.21&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode__children__colsNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.22&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.23 //@ownedActivityNode.0/@storyPattern/@linkVariable.24&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode__children__rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.25&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.26 //@ownedActivityNode.0/@storyPattern/@linkVariable.27&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode__children__columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.28&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.29 //@ownedActivityNode.0/@storyPattern/@linkVariable.30&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.31&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.32 //@ownedActivityNode.0/@storyPattern/@linkVariable.33&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode__children__topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.34&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.35 //@ownedActivityNode.0/@storyPattern/@linkVariable.36&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.15&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.16&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.16&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.16&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.17&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.17&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.17&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.18&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.18&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.18&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.19&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.19&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.19&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;file&amp;quot;, file);&amp;#xA;match.registerObject(&amp;quot;boardSpecNode&amp;quot;, boardSpecNode);&amp;#xA;match.registerObject(&amp;quot;dimensionNode&amp;quot;, dimensionNode);&amp;#xA;match.registerObject(&amp;quot;rowsNode&amp;quot;, rowsNode);&amp;#xA;match.registerObject(&amp;quot;colsNode&amp;quot;, colsNode);&amp;#xA;match.registerObject(&amp;quot;rowCountNode&amp;quot;, rowCountNode);&amp;#xA;match.registerObject(&amp;quot;columnCountNode&amp;quot;, columnCountNode);&amp;#xA;match.registerObject(&amp;quot;boardNode&amp;quot;, boardNode);&amp;#xA;match.registerObject(&amp;quot;topRowNode&amp;quot;, topRowNode);&amp;#xA;match.registerObject(&amp;quot;topRowLeftColumnNode&amp;quot;, topRowLeftColumnNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="file">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//File"/>
        </eParameters>
        <eParameters name="boardSpecNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="dimensionNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="rowsNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="colsNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="rowCountNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="columnCountNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="topRowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="topRowLeftColumnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12 //@ownedActivityNode.2/@storyPattern/@linkVariable.15 //@ownedActivityNode.2/@storyPattern/@linkVariable.18 //@ownedActivityNode.2/@storyPattern/@linkVariable.21 //@ownedActivityNode.2/@storyPattern/@linkVariable.24 //@ownedActivityNode.2/@storyPattern/@linkVariable.27 //@ownedActivityNode.2/@storyPattern/@linkVariable.30 //@ownedActivityNode.2/@storyPattern/@linkVariable.33 //@ownedActivityNode.2/@storyPattern/@linkVariable.36 //@ownedActivityNode.2/@storyPattern/@linkVariable.39&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.8 //@ownedActivityNode.2/@storyPattern/@linkVariable.10 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.19&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.20&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.22 //@ownedActivityNode.2/@storyPattern/@linkVariable.29&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.23 //@ownedActivityNode.2/@storyPattern/@linkVariable.25&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.26 //@ownedActivityNode.2/@storyPattern/@linkVariable.35&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.28 //@ownedActivityNode.2/@storyPattern/@linkVariable.31&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.34 //@ownedActivityNode.2/@storyPattern/@linkVariable.37&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.32 //@ownedActivityNode.2/@storyPattern/@linkVariable.40&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.38 //@ownedActivityNode.2/@storyPattern/@linkVariable.41&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file__rootNode__boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;rootNode&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode__children__boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode__children__dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.8 //@ownedActivityNode.2/@storyPattern/@linkVariable.7&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode__children__rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode__children__colsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode__children__rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode__children__columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.18&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.20 //@ownedActivityNode.2/@storyPattern/@linkVariable.19&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.21&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.23 //@ownedActivityNode.2/@storyPattern/@linkVariable.22&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode__children__topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.24&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.26 //@ownedActivityNode.2/@storyPattern/@linkVariable.25&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard__source__boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.27&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.28 //@ownedActivityNode.2/@storyPattern/@linkVariable.29&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard__target__board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.30&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.31 //@ownedActivityNode.2/@storyPattern/@linkVariable.32&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.33&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.34 //@ownedActivityNode.2/@storyPattern/@linkVariable.35&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.36&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.37 //@ownedActivityNode.2/@storyPattern/@linkVariable.38&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.39&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.40 //@ownedActivityNode.2/@storyPattern/@linkVariable.41&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.16&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.16&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.16&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.17&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.17&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.17&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.18&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.18&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.18&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.19&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.19&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.19&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.20&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.20&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.20&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.21&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.21&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.21&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.22&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.22&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.22&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.23&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.23&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.23&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.24&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.24&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.24&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.25&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.25&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.25&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.26&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.26&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.26&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.27&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.27&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.27&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.28&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.28&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.28&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;file&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardSpecNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;dimensionNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;rowsNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;colsNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;rowCountNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;columnCountNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;topRowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;topRowLeftColumnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2 //@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board/height&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;board&amp;quot;,&amp;quot;height&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board/width&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;board&amp;quot;,&amp;quot;width&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.16&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740016726F77436F756E744E6F64652E6765744E616D652829&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740019636F6C756D6E436F756E744E6F64652E6765744E616D652829&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.4 //@ownedActivityNode.5/@storyPattern/@linkVariable.5 //@ownedActivityNode.5/@storyPattern/@linkVariable.6 //@ownedActivityNode.5/@storyPattern/@linkVariable.7 //@ownedActivityNode.5/@storyPattern/@linkVariable.8 //@ownedActivityNode.5/@storyPattern/@linkVariable.9 //@ownedActivityNode.5/@storyPattern/@linkVariable.10 //@ownedActivityNode.5/@storyPattern/@linkVariable.11 //@ownedActivityNode.5/@storyPattern/@linkVariable.12 //@ownedActivityNode.5/@storyPattern/@linkVariable.13&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.9&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.11&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.12&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;String> var_rowCountNode_name = CspFactory.eINSTANCE.createVariable(&amp;quot;rowCountNode.name&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_rowCountNode_name.setValue(rowCountNode.getName());&amp;#xD;&amp;#xA;Variable&amp;lt;String> var_columnCountNode_name = CspFactory.eINSTANCE.createVariable(&amp;quot;columnCountNode.name&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_columnCountNode_name.setValue(columnCountNode.getName());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_board_height = CspFactory.eINSTANCE.createVariable(&amp;quot;board.height&amp;quot;, csp);&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_board_width = CspFactory.eINSTANCE.createVariable(&amp;quot;board.width&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;StringToNumber stringToNumber = new StringToNumber();StringToNumber stringToNumber_0 = new StringToNumber();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(stringToNumber);&amp;#xD;&amp;#xA;csp.getConstraints().add(stringToNumber_0);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;stringToNumber.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;stringToNumber.solve(var_rowCountNode_name,var_board_height);&amp;#xD;&amp;#xA;stringToNumber_0.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;stringToNumber_0.solve(var_columnCountNode_name,var_board_width);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;file&amp;quot;,file);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardSpecNode&amp;quot;,boardSpecNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;dimensionNode&amp;quot;,dimensionNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;rowsNode&amp;quot;,rowsNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;colsNode&amp;quot;,colsNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;rowCountNode&amp;quot;,rowCountNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;columnCountNode&amp;quot;,columnCountNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardNode&amp;quot;,boardNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;topRowNode&amp;quot;,topRowNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;topRowLeftColumnNode&amp;quot;,topRowLeftColumnNode);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BoardNodeToBoardRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.2 //@ownedActivityNode.5/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;file&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;boardSpecNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;dimensionNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;rowsNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;colsNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;rowCountNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;columnCountNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;topRowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;topRowLeftColumnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.3 //@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;board&amp;quot;, board);&amp;#xA;match.registerObject(&amp;quot;topLeftFloor&amp;quot;, topLeftFloor);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
        <eParameters name="topLeftFloor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12 //@ownedActivityNode.2/@storyPattern/@linkVariable.15 //@ownedActivityNode.2/@storyPattern/@linkVariable.18 //@ownedActivityNode.2/@storyPattern/@linkVariable.21 //@ownedActivityNode.2/@storyPattern/@linkVariable.24 //@ownedActivityNode.2/@storyPattern/@linkVariable.27 //@ownedActivityNode.2/@storyPattern/@linkVariable.30 //@ownedActivityNode.2/@storyPattern/@linkVariable.33 //@ownedActivityNode.2/@storyPattern/@linkVariable.36 //@ownedActivityNode.2/@storyPattern/@linkVariable.39&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.8 //@ownedActivityNode.2/@storyPattern/@linkVariable.10 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.19&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.20&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.22 //@ownedActivityNode.2/@storyPattern/@linkVariable.29&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.23 //@ownedActivityNode.2/@storyPattern/@linkVariable.25&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.26 //@ownedActivityNode.2/@storyPattern/@linkVariable.35&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.28 //@ownedActivityNode.2/@storyPattern/@linkVariable.31&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.34 //@ownedActivityNode.2/@storyPattern/@linkVariable.37&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.32 //@ownedActivityNode.2/@storyPattern/@linkVariable.40&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.38 //@ownedActivityNode.2/@storyPattern/@linkVariable.41&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file__rootNode__boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;rootNode&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode__children__boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode__children__dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode__children__rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10 //@ownedActivityNode.2/@storyPattern/@linkVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode__children__colsNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.13 //@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode__children__rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.16 //@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode__children__columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.18&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.19 //@ownedActivityNode.2/@storyPattern/@linkVariable.20&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.21&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.22 //@ownedActivityNode.2/@storyPattern/@linkVariable.23&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode__children__topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.24&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.25 //@ownedActivityNode.2/@storyPattern/@linkVariable.26&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard__source__boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.27&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.28 //@ownedActivityNode.2/@storyPattern/@linkVariable.29&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard__target__board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.30&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.31 //@ownedActivityNode.2/@storyPattern/@linkVariable.32&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.33&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.34 //@ownedActivityNode.2/@storyPattern/@linkVariable.35&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.36&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.37 //@ownedActivityNode.2/@storyPattern/@linkVariable.38&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.39&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.41 //@ownedActivityNode.2/@storyPattern/@linkVariable.40&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.15&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.16&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.16&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.16&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.17&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.17&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.17&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.18&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.18&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.18&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.19&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.19&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.19&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.20&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.20&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.20&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.21&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.21&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.21&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.22&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.22&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.22&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.23&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.23&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.23&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.24&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.24&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.24&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.25&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.25&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.25&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.26&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.26&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.26&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.27&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.27&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.27&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.28&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.28&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.28&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;(java.lang.String)csp.getAttributeVariable(&amp;quot;rowCountNode&amp;quot;,&amp;quot;name&amp;quot;).getValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;(java.lang.String)csp.getAttributeVariable(&amp;quot;columnCountNode&amp;quot;,&amp;quot;name&amp;quot;).getValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8 //@ownedActivityNode.3/@storyPattern/@linkVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.9 //@ownedActivityNode.3/@storyPattern/@linkVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.11 //@ownedActivityNode.3/@storyPattern/@linkVariable.12&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.12&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;topLeftFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.13&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.16&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740011626F6172642E6765744865696768742829&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740010626F6172642E67657457696474682829&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.4 //@ownedActivityNode.5/@storyPattern/@linkVariable.5 //@ownedActivityNode.5/@storyPattern/@linkVariable.6 //@ownedActivityNode.5/@storyPattern/@linkVariable.7 //@ownedActivityNode.5/@storyPattern/@linkVariable.8 //@ownedActivityNode.5/@storyPattern/@linkVariable.9 //@ownedActivityNode.5/@storyPattern/@linkVariable.10 //@ownedActivityNode.5/@storyPattern/@linkVariable.11 //@ownedActivityNode.5/@storyPattern/@linkVariable.12 //@ownedActivityNode.5/@storyPattern/@linkVariable.13&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;file&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.9&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.11&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.12&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_board_height = CspFactory.eINSTANCE.createVariable(&amp;quot;board.height&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_board_height.setValue(board.getHeight());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_board_width = CspFactory.eINSTANCE.createVariable(&amp;quot;board.width&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_board_width.setValue(board.getWidth());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;String> var_rowCountNode_name = CspFactory.eINSTANCE.createVariable(&amp;quot;rowCountNode.name&amp;quot;, csp);&amp;#xD;&amp;#xA;Variable&amp;lt;String> var_columnCountNode_name = CspFactory.eINSTANCE.createVariable(&amp;quot;columnCountNode.name&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;StringToNumber stringToNumber = new StringToNumber();StringToNumber stringToNumber_0 = new StringToNumber();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(stringToNumber);&amp;#xD;&amp;#xA;csp.getConstraints().add(stringToNumber_0);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;stringToNumber.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;stringToNumber.solve(var_rowCountNode_name,var_board_height);&amp;#xD;&amp;#xA;stringToNumber_0.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;stringToNumber_0.solve(var_columnCountNode_name,var_board_width);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;board&amp;quot;,board);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;topLeftFloor&amp;quot;,topLeftFloor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BoardNodeToBoardRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.2 //@ownedActivityNode.5/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;topLeftFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_File_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="file">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//File"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_5">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="boardSpecNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_6">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="dimensionNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_7">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="rowsNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_8">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="colsNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_9">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="rowCountNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_10">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="columnCountNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_11">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_12">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="topRowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_13">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;file&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/file&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardSpecNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardSpecNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;dimensionNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/dimensionNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;colsNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/colsNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/rowCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/columnCountNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topRowLeftColumnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD/topRowLeftColumnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3 //@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;file&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//File&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardSpecNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD_SPEC&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;dimensionNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3 //@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;DIMENSIONS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROWS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;colsNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLS&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.5&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnCountNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.6&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;1&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.7&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topRowLeftColumnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;rootNode&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.7&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.8&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="topRowLeftColumnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Board_1">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topLeftFloor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD/topLeftFloor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_4">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topLeftFloor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD/topLeftFloor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/BoardNodeToBoardRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;BoardNodeToBoardRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(rowCountNode.name, board.height)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;stringToNumber(columnCountNode.name, board.width)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topLeftFloor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.2 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;stringToNumber&quot;>&#xD;&#xA;          &lt;signature type=&quot;EString&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;rowCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;height&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;String&quot; attribute=&quot;name&quot; objectVariable=&quot;columnCountNode&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;width&quot; objectVariable=&quot;board&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="topLeftFloor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="GoalNodeToFigureRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floorNode&amp;quot;, floorNode);&amp;#xA;match.registerObject(&amp;quot;figureNode&amp;quot;, figureNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__goal&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;figureNode&amp;quot;,figureNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;GoalNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__goal&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floor&amp;quot;, floor);&amp;#xA;match.registerObject(&amp;quot;goal&amp;quot;, goal);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="goal">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Goal"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__goal&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;goal&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;goal&amp;quot;,goal);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;GoalNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;goal&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_14">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_15">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;.&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_5">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;goal&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD/goal&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Goal_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;goal&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD/goal&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/GoalNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;GoalNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;goal&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Goal&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="goal">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Goal"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="LeftcolumnNodeToFloorRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.4 //@ownedActivityNode.0/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.3 //@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode__children__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.5&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.6 //@ownedActivityNode.0/@storyPattern/@linkVariable.7&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;boardNode&amp;quot;, boardNode);&amp;#xA;match.registerObject(&amp;quot;rowNode&amp;quot;, rowNode);&amp;#xA;match.registerObject(&amp;quot;columnNode&amp;quot;, columnNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="rowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="columnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12 //@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode__children__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10 //@ownedActivityNode.2/@storyPattern/@linkVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.13 //@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__top__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.16 //@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;top&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;columnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToBoard&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;topNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;floor&amp;quot;,&amp;quot;row&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740014746F704E65696768626F722E676574526F772829&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740012726F774E6F64652E676574496E6465782829&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal0 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal0&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal0.setValue(1);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_topNeighbor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;topNeighbor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_topNeighbor_row.setValue(topNeighbor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_rowNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;rowNode.index&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_rowNode_index.setValue(rowNode.getIndex());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.row&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Sub sub = new Sub();Eq&amp;lt;Number> eq = new Eq&amp;lt;Number>();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(sub);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;sub.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub.solve(var_floor_row,literal0,var_topNeighbor_row);&amp;#xD;&amp;#xA;eq.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq.solve(var_floor_row,var_rowNode_index);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardNode&amp;quot;,boardNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;rowNode&amp;quot;,rowNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;columnNode&amp;quot;,columnNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToBoard&amp;quot;,nodeToBoard);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;board&amp;quot;,board);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;topNeighbor&amp;quot;,topNeighbor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;LeftcolumnNodeToFloorRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1 //@ownedActivityNode.5/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;columnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3 //@ownedActivityNode.0/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__top__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.5 //@ownedActivityNode.0/@storyPattern/@linkVariable.6&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;top&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal0 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal0&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal0.setValue(1);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_row.setValue(floor.getRow());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_topNeighbor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;topNeighbor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_topNeighbor_row.setValue(topNeighbor.getRow());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Sub sub = new Sub();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(sub);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;sub.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub.solve(var_floor_row,literal0,var_topNeighbor_row);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;board&amp;quot;, board);&amp;#xA;match.registerObject(&amp;quot;topNeighbor&amp;quot;, topNeighbor);&amp;#xA;match.registerObject(&amp;quot;floor&amp;quot;, floor);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextEdges&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
        <eParameters name="topNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12 //@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode__children__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10 //@ownedActivityNode.2/@storyPattern/@linkVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__top__topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.15&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.17 //@ownedActivityNode.2/@storyPattern/@linkVariable.16&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;top&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.14&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;rowNode&amp;quot;,&amp;quot;index&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToBoard&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2 //@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;topNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED000574000E666C6F6F722E676574526F772829&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_row = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.row&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_row.setValue(floor.getRow());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_rowNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;rowNode.index&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Eq&amp;lt;Number> eq = new Eq&amp;lt;Number>();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(eq);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;eq.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq.solve(var_floor_row,var_rowNode_index);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardNode&amp;quot;,boardNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToBoard&amp;quot;,nodeToBoard);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;board&amp;quot;,board);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;topNeighbor&amp;quot;,topNeighbor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;LeftcolumnNodeToFloorRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1 //@ownedActivityNode.5/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;topNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_16">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_17">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="rowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_18">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="columnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Board_2">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/topNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_6">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/topNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="topNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_7">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/topNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/LeftcolumnNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;LeftcolumnNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.row, 1, topNeighbor.row)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.row , rowNode.index)&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;topNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.7&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;top&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;row&quot; objectVariable=&quot;topNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;rowNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="ServerNodeToFigureRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floorNode&amp;quot;, floorNode);&amp;#xA;match.registerObject(&amp;quot;figureNode&amp;quot;, figureNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__server&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;figureNode&amp;quot;,figureNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ServerNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__server&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floor&amp;quot;, floor);&amp;#xA;match.registerObject(&amp;quot;server&amp;quot;, server);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="server">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Server"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__server&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;server&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;server&amp;quot;,server);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ServerNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;server&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_19">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_20">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;$&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_8">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;server&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD/server&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Server_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;server&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD/server&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/ServerNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;ServerNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;server&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Server&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="server">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Server"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="TopRowNodeToFloorRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode__children__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;boardNode&amp;quot;, boardNode);&amp;#xA;match.registerObject(&amp;quot;rowNode&amp;quot;, rowNode);&amp;#xA;match.registerObject(&amp;quot;columnNode&amp;quot;, columnNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode__children__rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextEdges&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="rowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="columnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.8 //@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode__children__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10 //@ownedActivityNode.2/@storyPattern/@linkVariable.11&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__left__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.13 //@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;left&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;columnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToBoard&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;leftNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/col&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;floor&amp;quot;,&amp;quot;col&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED00057400156C6566744E65696768626F722E676574436F6C2829&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED0005740015636F6C756D6E4E6F64652E676574496E6465782829&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal0 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal0&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal0.setValue(1);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_leftNeighbor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;leftNeighbor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_leftNeighbor_col.setValue(leftNeighbor.getCol());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_columnNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;columnNode.index&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_columnNode_index.setValue(columnNode.getIndex());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.col&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Sub sub = new Sub();Eq&amp;lt;Number> eq = new Eq&amp;lt;Number>();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(sub);&amp;#xD;&amp;#xA;csp.getConstraints().add(eq);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;sub.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub.solve(var_floor_col,literal0,var_leftNeighbor_col);&amp;#xD;&amp;#xA;eq.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq.solve(var_floor_col,var_columnNode_index);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardNode&amp;quot;,boardNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;rowNode&amp;quot;,rowNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;columnNode&amp;quot;,columnNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToBoard&amp;quot;,nodeToBoard);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;board&amp;quot;,board);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;leftNeighbor&amp;quot;,leftNeighbor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;TopRowNodeToFloorRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1 //@ownedActivityNode.5/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;columnNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1 //@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3 //@ownedActivityNode.0/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__left__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.5 //@ownedActivityNode.0/@storyPattern/@linkVariable.6&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;left&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.6&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;Variable&amp;lt;Number> literal0 = CspFactory.eINSTANCE.createVariable(&amp;quot;literal0&amp;quot;, true, csp);&amp;#xD;&amp;#xA;literal0.setValue(1);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_col.setValue(floor.getCol());&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_leftNeighbor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;leftNeighbor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_leftNeighbor_col.setValue(leftNeighbor.getCol());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Sub sub = new Sub();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(sub);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;sub.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;sub.solve(var_floor_col,literal0,var_leftNeighbor_col);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;board&amp;quot;, board);&amp;#xA;match.registerObject(&amp;quot;leftNeighbor&amp;quot;, leftNeighbor);&amp;#xA;match.registerObject(&amp;quot;floor&amp;quot;, floor);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;contextEdges&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
        <eParameters name="leftNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3 //@ownedActivityNode.2/@storyPattern/@linkVariable.6 //@ownedActivityNode.2/@storyPattern/@linkVariable.9 //@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.7&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.8 //@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;rowNode__children__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__source__columnNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;source&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor__target__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.6&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.7 //@ownedActivityNode.2/@storyPattern/@linkVariable.8&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;target&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;board__floors__floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.9&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.11 //@ownedActivityNode.2/@storyPattern/@linkVariable.10&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;floors&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__left__leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.12&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.14 //@ownedActivityNode.2/@storyPattern/@linkVariable.13&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;left&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.9&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.10&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.11&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.12&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.13&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;boardNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;rowNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;((Number)csp.getAttributeVariable(&amp;quot;columnNode&amp;quot;,&amp;quot;index&amp;quot;).getValue()).intValue()&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToBoard&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;leftNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.8&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.10&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; bound=&quot;true&quot; value=&quot;ACED000574000E666C6F6F722E676574436F6C2829&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;forward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;simultaneous variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0 //@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;backward variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.1&quot;/>&#xD;&#xA;        &lt;source/>&#xD;&#xA;        &lt;target variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; constraints=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@constraints.0&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdLinkElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// Create CSP&amp;#xD;&amp;#xA;CSP csp = CspFactory.eINSTANCE.createCSP();&amp;#xD;&amp;#xA;isApplicableMatch.getAttributeInfo().add(csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create literals&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create attribute variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_floor_col = CspFactory.eINSTANCE.createVariable(&amp;quot;floor.col&amp;quot;, true, csp);&amp;#xD;&amp;#xA;var_floor_col.setValue(floor.getCol());&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create explicit parameters&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create unbound variables&amp;#xD;&amp;#xA;Variable&amp;lt;Number> var_columnNode_index = CspFactory.eINSTANCE.createVariable(&amp;quot;columnNode.index&amp;quot;, csp);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Create constraints&amp;#xD;&amp;#xA;Eq&amp;lt;Number> eq = new Eq&amp;lt;Number>();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;csp.getConstraints().add(eq);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Solve CSP&amp;#xD;&amp;#xA;eq.setRuleName(&amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;eq.solve(var_floor_col,var_columnNode_index);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;boardNode&amp;quot;,boardNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;rowNode&amp;quot;,rowNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToBoard&amp;quot;,nodeToBoard);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;board&amp;quot;,board);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;leftNeighbor&amp;quot;,leftNeighbor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;csp.check();&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;TopRowNodeToFloorRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToBoard&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToBoard&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.3 //@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.4&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.5&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.1 //@ownedActivityNode.5/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.5/@storyPattern/@csp/@variables.0 //@ownedActivityNode.5/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;board&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;leftNeighbor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_21">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="boardNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_22">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="rowNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_23">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;boardNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/boardNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;rowNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/rowNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;columnNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD/columnNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;boardNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;BOARD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.0&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;rowNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/index&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;ROW&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.1&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;columnNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;COLUMN&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="columnNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Board_3">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/leftNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="board">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Board"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_9">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/leftNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="leftNeighbor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_10">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:csp=&quot;http://www.moflon.org.TGGLanguage.csp&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;board&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/board&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/leftNeighbor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0 //@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.1 //@ownedActivityNode.3/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.3/@storyPattern/@csp/@variables.0 //@ownedActivityNode.3/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/TopRowNodeToFloorRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;TopRowNodeToFloorRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;sub(floor.col, 1, leftNeighbor.col)&amp;#xD;&amp;#xA;&amp;#x9;&amp;#x9;eq(floor.col, columnNode.index)&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;board&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Board&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;leftNeighbor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0 //@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;object href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@tggRule.1/@objectVariable.6&quot;/>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;0&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor/row&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;floors&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;left&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;csp>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.1 //@ownedActivityNode.6/@storyPattern/@csp/@variables.2&quot; name=&quot;sub&quot;>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;1&quot;/>&#xD;&#xA;          &lt;signature type=&quot;EDouble&quot; index=&quot;2&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BBF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BFB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FBB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;constraints variables=&quot;//@ownedActivityNode.6/@storyPattern/@csp/@variables.0 //@ownedActivityNode.6/@storyPattern/@csp/@variables.3&quot; name=&quot;eq&quot;>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BB&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;BF&quot;/>&#xD;&#xA;          &lt;allowedAdornments value=&quot;FB&quot;/>&#xD;&#xA;        &lt;/constraints>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;floor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:Literal&quot; bound=&quot;true&quot; value=&quot;ACED000574000131&quot; type=&quot;Number&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;col&quot; objectVariable=&quot;leftNeighbor&quot;/>&#xD;&#xA;        &lt;variables xsi:type=&quot;csp:AttributeVariable&quot; type=&quot;Number&quot; attribute=&quot;index&quot; objectVariable=&quot;columnNode&quot;/>&#xD;&#xA;      &lt;/csp>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="WallNodeToFigureRule">
      <eAnnotations source="TGGRule"/>
      <eSuperTypes href="http://www.moflon.org.TGGRuntime#//AbstractRule"/>
      <eOperations name="isAppropriate_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floorNode&amp;quot;, floorNode);&amp;#xA;match.registerObject(&amp;quot;figureNode&amp;quot;, figureNode);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2 //@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__wall&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4 //@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_FWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;figureNode&amp;quot;,figureNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;WallNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1 //@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;figureNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect elements to be translated&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.0 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__wall&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2 //@ownedActivityNode.0/@storyPattern/@linkVariable.3&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.0/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedElements&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;toBeTranslatedEdges&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.0/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;Check CSP&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;register objects to match&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.registerObject(&amp;quot;floor&amp;quot;, floor);&amp;#xA;match.registerObject(&amp;quot;wall&amp;quot;, wall);&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect context elements&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;contextNodes&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.6&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
        <eParameters name="wall">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Wall"/>
        </eParameters>
      </eOperations>
      <eOperations name="perform_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;perform postprocessing&quot; outgoing=&quot;//@ownedActivityEdge.0&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;// No post processing method found&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;bookkeeping for edges&quot; outgoing=&quot;//@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0 //@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EObject&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floorNode__children__figureNode&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.1 //@ownedActivityNode.2/@storyPattern/@linkVariable.2&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;children&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;floor__figure__wall&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.3&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.5 //@ownedActivityNode.2/@storyPattern/@linkVariable.4&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Edge&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//Edge/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;figure&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.6&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedEdges&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;src&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.4&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;trg&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.7&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;perform transformation&quot; outgoing=&quot;//@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floorNode&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;nodeToFloor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;wall&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;csp&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingSemantics=&quot;OPTIONAL&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGLanguage#//csp/CSP&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;isApplicableMatch.getObject(&amp;quot;this&amp;quot;)&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;attributeInfo&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.5&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.7&quot;/>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.3&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;collect translated elements&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingOperator=&quot;CREATE&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//PerformRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;createdElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;translatedElements&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.0&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.2&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//PerformRuleResult"/>
        <eParameters name="isApplicableMatch">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableMatch"/>
        </eParameters>
      </eOperations>
      <eOperations name="isApplicable_BWD">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;solve CSP&quot; outgoing=&quot;//@ownedActivityEdge.5&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;#xD;&amp;#xA;// Snapshot pattern match on which CSP is solved&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floorNode&amp;quot;,floorNode);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;nodeToFloor&amp;quot;,nodeToFloor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;floor&amp;quot;,floor);&amp;#xD;&amp;#xA;isApplicableMatch.registerObject(&amp;quot;wall&amp;quot;,wall);&amp;#xD;&amp;#xA;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.0&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.1&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; incomingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.2/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;isApplicableMatch&quot; target=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.2/@storyPattern/@objectVariable.1&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;check CSP&quot; outgoing=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true;&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.3&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;perform_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/rule&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;WallNodeToFigureRule&amp;quot;&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;find context&quot; outgoing=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.7&quot; incoming=&quot;//@ownedActivityEdge.6 //@ownedActivityEdge.4 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;nodeToFloor&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0 //@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//NodeToFloor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.1&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.2&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;isApplicableMatch&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsApplicableMatch&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;source&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;target&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.3&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.2&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;core match&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;floor&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;match.getObject(&amp;quot;wall&amp;quot;)&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.2&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.1&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.0&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.5&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsApplicableRuleResult"/>
        <eParameters name="match">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//Match"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_24">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floorNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_FWD_Node_25">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floorNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD/floorNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;figureNode&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD/figureNode&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_FWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_FWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floorNode&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;figureNode&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//Node&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;#&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot;>&#xD;&#xA;              &lt;attribute href=&quot;platform:/plugin/org.moflon.moca.MocaTree/model/MocaTree.ecore#//TreeElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;children&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="figureNode">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.MocaTree#//Node"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Floor_11">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;wall&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD/wall&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="floor">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Floor"/>
        </eParameters>
      </eOperations>
      <eOperations name="isAppropriate_BWD_Wall_0">
        <eAnnotations source="SDM">
          <details key="XMI" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xD;&#xA;&lt;activities:Activity xmi:version=&quot;2.0&quot; xmlns:xmi=&quot;http://www.omg.org/XMI&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:TGGLanguage=&quot;http://www.moflon.org.TGGLanguage&quot; xmlns:activities=&quot;http://www.moflon.org.SDMLanguage.activities&quot; xmlns:callExpressions=&quot;http://www.moflon.org.SDMLanguage.calls.callExpressions&quot; xmlns:ecore=&quot;http://www.eclipse.org/emf/2002/Ecore&quot; xmlns:expressions=&quot;http://www.moflon.org.SDMLanguage.expressions&quot; xmlns:patternExpressions=&quot;http://www.moflon.org.SDMLanguage.patterns.patternExpressions&quot;>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StartNode&quot; outgoing=&quot;//@ownedActivityEdge.5&quot;/>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StopNode&quot; incoming=&quot;//@ownedActivityEdge.4&quot;>&#xD;&#xA;    &lt;returnValue xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot;/>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StatementNode&quot; name=&quot;bookkeeping with generic isAppropriate method&quot; outgoing=&quot;//@ownedActivityEdge.7 //@ownedActivityEdge.9&quot; incoming=&quot;//@ownedActivityEdge.0&quot;>&#xD;&#xA;    &lt;statementExpression xsi:type=&quot;callExpressions:MethodCallExpression&quot;>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;match&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD/match&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;floor&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD/floor&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;ownedParameterBindings>&#xD;&#xA;        &lt;valueExpression xsi:type=&quot;expressions:TextualExpression&quot; expressionText=&quot;wall&quot;/>&#xD;&#xA;        &lt;parameter href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD/wall&quot;/>&#xD;&#xA;      &lt;/ownedParameterBindings>&#xD;&#xA;      &lt;callee href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule/isAppropriate_BWD&quot;/>&#xD;&#xA;      &lt;target xsi:type=&quot;patternExpressions:ObjectVariableExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.0&quot;/>&#xD;&#xA;    &lt;/statementExpression>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match&quot; outgoing=&quot;//@ownedActivityEdge.0 //@ownedActivityEdge.2&quot; incoming=&quot;//@ownedActivityEdge.1 //@ownedActivityEdge.9 //@ownedActivityEdge.8&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.3/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.3/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;prepare return value&quot; outgoing=&quot;//@ownedActivityEdge.6&quot; incoming=&quot;//@ownedActivityEdge.5&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;this&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.gen.ecore#//Rules/WallNodeToFigureRule&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__performOperation&quot; incomingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1 //@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EOperation&quot;/>&#xD;&#xA;        &lt;constraint>&#xD;&#xA;          &lt;constraintExpression xsi:type=&quot;expressions:ComparisonExpression&quot; operator=&quot;EQUAL&quot;>&#xD;&#xA;            &lt;rightExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;&amp;quot;isApplicable_BWD&amp;quot;&quot;/>&#xD;&#xA;            &lt;leftExpression xsi:type=&quot;patternExpressions:AttributeValueExpression&quot; object=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot;>&#xD;&#xA;              &lt;attribute href=&quot;http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name&quot;/>&#xD;&#xA;            &lt;/leftExpression>&#xD;&#xA;          &lt;/constraintExpression>&#xD;&#xA;        &lt;/constraint>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.0&quot; bindingOperator=&quot;CREATE&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;false&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;__eClass&quot; outgoingLink=&quot;//@ownedActivityNode.4/@storyPattern/@linkVariable.1&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.eclipse.org/emf/2002/Ecore#//EClass&quot;/>&#xD;&#xA;        &lt;bindingExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;this.eClass()&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;performOperation&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.2&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;      &lt;linkVariable name=&quot;eOperations&quot; target=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.4/@storyPattern/@objectVariable.3&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;set success&quot; outgoing=&quot;//@ownedActivityEdge.4&quot; incoming=&quot;//@ownedActivityEdge.3&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.5/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;        &lt;attributeAssignment>&#xD;&#xA;          &lt;attribute href=&quot;http://www.moflon.org.TGGRuntime#//RuleResult/success&quot;/>&#xD;&#xA;          &lt;valueExpression xsi:type=&quot;expressions:LiteralExpression&quot; value=&quot;true&quot;/>&#xD;&#xA;        &lt;/attributeAssignment>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.0&quot; source=&quot;//@ownedActivityNode.5/@storyPattern/@objectVariable.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;test core match kernel&quot; outgoing=&quot;//@ownedActivityEdge.3 //@ownedActivityEdge.1&quot; incoming=&quot;//@ownedActivityEdge.2 //@ownedActivityEdge.6&quot; forEach=&quot;true&quot;>&#xD;&#xA;    &lt;storyPattern xsi:type=&quot;TGGLanguage:TGGRule&quot; name=&quot;WallNodeToFigureRule&quot; cspSpec=&quot;&amp;#xD;&amp;#xA;&amp;#x9;&amp;#xD;&amp;#xA;&amp;#x9;&quot;>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;floor&quot; outgoingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Floor&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable xsi:type=&quot;TGGLanguage:TGGObjectVariable&quot; name=&quot;wall&quot; incomingLink=&quot;//@ownedActivityNode.6/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;platform:/resource/SokobanLanguage/model/SokobanLanguage.ecore#//Wall&quot;/>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable xsi:type=&quot;TGGLanguage:TGGLinkVariable&quot; name=&quot;figure&quot; target=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.6/@storyPattern/@objectVariable.0&quot;>&#xD;&#xA;        &lt;domain href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;      &lt;/linkVariable>&#xD;&#xA;      &lt;correspondence href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.2&quot;/>&#xD;&#xA;      &lt;source href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.0&quot;/>&#xD;&#xA;      &lt;target href=&quot;platform:/resource/SokobanCodeAdapter/model/SokobanCodeAdapter.tgg.xmi#//@domain.1&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityNode xsi:type=&quot;activities:StoryNode&quot; name=&quot;Add match to rule result&quot; outgoing=&quot;//@ownedActivityEdge.8&quot; incoming=&quot;//@ownedActivityEdge.7&quot;>&#xD;&#xA;    &lt;storyPattern>&#xD;&#xA;      &lt;objectVariable name=&quot;ruleresult&quot; outgoingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;objectVariable name=&quot;match&quot; incomingLink=&quot;//@ownedActivityNode.7/@storyPattern/@linkVariable.0&quot; bindingState=&quot;BOUND&quot;>&#xD;&#xA;        &lt;type xsi:type=&quot;ecore:EClass&quot; href=&quot;http://www.moflon.org.TGGRuntime#//Match&quot;/>&#xD;&#xA;      &lt;/objectVariable>&#xD;&#xA;      &lt;linkVariable name=&quot;matches&quot; target=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.1&quot; source=&quot;//@ownedActivityNode.7/@storyPattern/@objectVariable.0&quot; bindingOperator=&quot;CREATE&quot;/>&#xD;&#xA;    &lt;/storyPattern>&#xD;&#xA;  &lt;/ownedActivityNode>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.2&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;EACH_TIME&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.3&quot; target=&quot;//@ownedActivityNode.6&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.6&quot; target=&quot;//@ownedActivityNode.5&quot; guard=&quot;END&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.5&quot; target=&quot;//@ownedActivityNode.1&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.0&quot; target=&quot;//@ownedActivityNode.4&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.4&quot; target=&quot;//@ownedActivityNode.6&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.7&quot; guard=&quot;SUCCESS&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.7&quot; target=&quot;//@ownedActivityNode.3&quot;/>&#xD;&#xA;  &lt;ownedActivityEdge source=&quot;//@ownedActivityNode.2&quot; target=&quot;//@ownedActivityNode.3&quot; guard=&quot;FAILURE&quot;/>&#xD;&#xA;&lt;/activities:Activity>&#xD;&#xA;"/>
        </eAnnotations>
        <eType xsi:type="ecore:EClass" href="http://www.moflon.org.TGGRuntime#//IsAppropriateRuleResult"/>
        <eParameters name="wall">
          <eType xsi:type="ecore:EClass" href="http://www.moflon.org.SokobanLanguage#//Wall"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
  </eSubpackages>
</ecore:EPackage>
